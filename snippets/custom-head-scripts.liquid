<link rel="stylesheet" href="{{ 'slick.min.css' | asset_url }}" />
<link rel="stylesheet" href="{{ 'slick-theme.css' | asset_url }}" />


<!-- EASYGIFT SCRIPT -->
{% if customer %}
  <script type="text/javascript" data-src="https://cdn.506.io/eg/script.js?shop=bombay-shaving.myshopify.com&id={{ customer.id }}&order_count={{ customer.orders_count }}&total_spent={{ customer.total_spent }}&tags={{ customer.tags | join: "," }}"></script>
{% else %}
  <script type="text/javascript" data-src="https://cdn.506.io/eg/script.js?shop=bombay-shaving.myshopify.com"></script>
{% endif %}
  
<!-- END EASYGIFT SCRIPT -->
{% if template contains '404' %}<meta http-equiv="refresh" content="0;URL={{ shop.url }}" />{% endif %}
{%- render 'redirect' -%}

{% if product.tags contains 'free' or product.tags contains 'hide' %}
      <script>window.location.href= 'https://bombayshavingcompany.com'</script>
  {% endif %} 
{%  render 'custom-page-schema' %}
<!-- Global Site Tag (gtag.js) - Google AdWords: xxxxxxxxxxxxxx -->
<script async data-src="https://www.googletagmanager.com/gtag/js?id=AW-881045097"></script>
<script type="text/javascripts">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'AW-881045097', {'send_page_view': false});
</script>

<!-- Global site tag (gtag.js) - Google Ads: 881045097 -->
<script  type="text/javascripts">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-881045097');
</script>

{% comment %} Admitad pixel {% endcomment %}
<script src="https://www.artfut.com/static/tagtag.min.js?campaign_code=422061a338" async onerror='var self =this;window.ADMITAD=window.ADMITAD||{},ADMITAD.Helpers=ADMITAD.Helpers||{},ADMITAD.Helpers.generateDomains=function(){for(var e=new Date,n=Math.floor(new Date(2020,e.getMonth(),e.getDate()).setUTCHours(0,0,0,0)/1e3),t=parseInt(1e12*(Math.sin(n)+1)).toString(30),i=["de"],o=[],a=0;a<i.length;++a)o.push({domain:t+"."+i[a],name:t});return o},ADMITAD.Helpers.findTodaysDomain=function(e){function n(){var o=newXMLHttpRequest,a=i[t].domain,D="https://"+a+"/";o.open("HEAD",D,!0),o.onload=function(){setTimeout(e,0,i[t])},o.onerror=function(){++t<i.length?setTimeout(n,0):setTimeout(e,0,void 0)},o.send()}var t=0,i=ADMITAD.Helpers.generateDomains();n()},window.ADMITAD=window.ADMITAD||{},ADMITAD.Helpers.findTodaysDomain(function(e){if(window.ADMITAD.dynamic=e,window.ADMITAD.dynamic){var n=function(){return function(){return self.src?self:""}}(),t=n(),i=(/campaign_code=([^&]+)/.exec(t.src)||[])[1]||"";t.parentNode.removeChild(t);var o=document.getElementsByTagName("head")[0],a=document.createElement("script");a.src="https://www."+window.ADMITAD.dynamic.domain+"/static/"+window.ADMITAD.dynamic.name.slice(1)+window.ADMITAD.dynamic.name.slice(0,1)+".min.js?campaign_code="+i,o.appendChild(a)}});'></script>
<script type="text/javascript">var cookie_name='deduplication_cookie';var days_to_store=90;var deduplication_cookie_value='Admitads_Affiliate';var channel_name='utm_source';getSourceParamFromUri=function(){var pattern=channel_name+'=([^&]+)';var re=new RegExp(pattern);return(re.exec(document.location.search)||[])[1]||''};getSourceCookie=function(){var matches=document.cookie.match(new RegExp('(?:^|; )'+cookie_name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,'\\$1')+'=([^;]*)'));return matches?decodeURIComponent(matches[1]):undefined};setSourceCookie=function(){var param=getSourceParamFromUri();if(!param){return}var period=days_to_store*60*60*24*1000;var expiresDate=new Date((period)+ +new Date);var cookieString=cookie_name+'='+param+'; path=/; expires='+expiresDate.toGMTString();document.cookie=cookieString;document.cookie=cookieString+'; domain=.'+location.host};setSourceCookie();if(!getSourceCookie(cookie_name)){ADMITAD.Invoice.broker='na'}else if(getSourceCookie(cookie_name)!=deduplication_cookie_value){ADMITAD.Invoice.broker=getSourceCookie(cookie_name)}else{ADMITAD.Invoice.broker='adm'}</script>
{% comment %} Admitad pixel {% endcomment %}

 {% comment %}{% assign meta = product.metafields.meta %}
  {% if meta.product_schema   != blank %}
  {{ meta.product_schema }}
  {% endif %} {% endcomment %}

{% comment %}
<!-- CASHKARO -->
  <script>
function cid() {
  var e;
  var s1;
  var s2;
  return Promise.resolve().then(function () {
    e = new URLSearchParams(window.location.search).get("pid");
    s1 = new URLSearchParams(window.location.search).get("sub1");
    s2 = new URLSearchParams(window.location.search).get("sub2");
    return null === e ? null : fetch("https://secure.traqkarr.com/click?pid=" + e + "&sub1=" + s1 +"&sub2=" + s2 +"&offer_id=106&format=json").then(function (e) {
      return e.json();
    });
  });
}

function sc(e) {
  var c = new Date();
  c.setTime(c.getTime() + 365 * 24 * 60 * 60 * 1000), document.cookie = "affclick=" + e + ";expires=" + c.toUTCString() + ";path=/" + ";domain=.bombayshavingcompany.com", localStorage.setItem("affclick", e);
}

(function () {
  var e;
  return Promise.resolve().then(function () {
    return cid();
  }).then(function (_resp) {
    e = _resp;
    null !== e && sc(e.clickid);
  });
})();
</script>
{% endcomment %}

{% comment %}
<!-- Google Tag Manager - GRAAS-->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MDWWTR7');</script>
<!-- End Google Tag Manager -->
{% endcomment %}

{% comment %}YOUTUBE EMBED OPTIMIZE {% endcomment %}
{% render 'lite-youtube-embed' %}
{% comment %}YOUTUBE EMBED OPTIMIZE {% endcomment %}

<!-- Below code to be placed in the head section of the website to track across all devices and OS -->

<script>
    // Set the survival days for cookies
    var ckSurvivalDays = 7;

    // Function to get search parameters from the URL
    function getCKSearchParams() {
        var searchParams = new URLSearchParams(window.location.search);
        var params = {};
        for (var [key, value] of searchParams) {
            params[key] = value;
        }
        return params;
    }

    // Function to store parameters in local storage
    function storeCKInLocalStorage(params) {
        // Remove previous entries if certain parameters are not present
        if (!('gclid' in params)) {
            localStorage.removeItem('ck_gclid')
        }
        if (!('fbclid' in params)) {
            localStorage.removeItem('ck_fbclid')
        }
        if (!('igshid' in params)) {
            localStorage.removeItem('ck_igshid')
        }
        if (!('gad_source' in params)) {
            localStorage.removeItem('ck_gad_source')
        }
        if (!('msclkid' in params)) {
            localStorage.removeItem('ck_msclkid')
        }

        // Remove all previous ck_ entries if new tracking parameters are present
        if ('gclid' in params || 'fbclid' in params || 'igshid' in params || 'gad_source' in params || 'msclkid' in params) {
            Object.keys(localStorage).forEach(function (key) {
                if (/^ck_/.test(key)) {
                    localStorage.removeItem(key);
                }
            });
        } else {
            // Store parameters in local storage
            for (var key in params) {
                if (params.hasOwnProperty(key)) {
                    localStorage.setItem("ck_" + key, params[key]);
                }
            }

            // Store the current timestamp in local storage
            var currentTimestamp = Math.floor(Date.now() / 1000); // Convert milliseconds to seconds
            localStorage.setItem('ck_timestamp', currentTimestamp);
        }
    }

    // Function to store parameters in cookies
    function storeCKInCookies(params) {
        // Remove previous entries if certain parameters are not present
        if (!('gclid' in params)) {
            document.cookie = "ck_gclid=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
        }
        if (!('fbclid' in params)) {
            document.cookie = "ck_fbclid=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
        }
        if (!('igshid' in params)) {
            document.cookie = "ck_igshid=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
        }
        if (!('gad_source' in params)) {
            document.cookie = "ck_gad_source=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
        }
        if (!('msclkid' in params)) {
            document.cookie = "ck_msclkid=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
        }

        // Remove all previous ck_ entries if new tracking parameters are present
        if ('gclid' in params || 'fbclid' in params || 'igshid' in params || 'gad_source' in params || 'msclkid' in params) {
            var cookies = document.cookie.split(";");
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                if (cookie.startsWith('ck_')) {
                    var cookieName = cookie.split("=")[0];
                    document.cookie = cookieName + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                }
            }
        } else {
            // Store parameters in cookies with an expiration date
            var expirationDate = new Date();
            expirationDate.setDate(expirationDate.getDate() + ckSurvivalDays);
            for (var key in params) {
                if (params.hasOwnProperty(key)) {
                    document.cookie = `ck_${key}=${params[key]}; expires=${expirationDate.toUTCString()}; path=/`;
                }
            }
        }
    }

    // Get search parameters
    var ckSearchParams = getCKSearchParams();

    // Store parameters in local storage and cookies
    storeCKInLocalStorage(ckSearchParams);
    storeCKInCookies(ckSearchParams);
</script>